{"version":3,"sources":["../../src/task/logger.js"],"names":["levels","logger","config","level","pattern","handler","configure","ERROR","name","_logger","child","startTime","infoTime","subtask","startTimeSubtask","infoSuccessTimeEnd","succeed"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;QAESA,M;AAEF,MAAMC,0BAAS,0BAAW,SAAX,CAAf;AACA,MAAMC,0BAASC,SACpB,CACE;AACEC,WAAS,UADX;AAEEC,WAAS,iCAAmBF,KAAnB;AAFX,CADF,CADK;;AASA,MAAMG,gCAAYH,SAAS,4BAAqBD,OAAOC,SAAS,oBAAOI,KAAvB,CAArB,CAA3B;;kBAGSC,IAAD,IAAU;AACvB,QAAMC,UAAUR,OAAOS,KAAP,CAAaF,IAAb,EAAmBA,IAAnB,CAAhB;AACA,QAAMG,YAAYF,QAAQG,QAAR,CAAiB,UAAjB,CAAlB;;AAEA,SAAO;AACLC,YAAQL,IAAR,EAAc;AACZ,YAAMM,mBAAmBL,QAAQG,QAAR,CAAiBJ,IAAjB,CAAzB;AACA,aAAO,MAAM;AACXC,gBAAQM,kBAAR,CAA2BD,gBAA3B,EAA8C,GAAEN,IAAK,SAArD;AACD,OAFD;AAGD,KANI;;AAQLQ,cAAU;AACRP,cAAQM,kBAAR,CAA2BJ,SAA3B,EAAsC,OAAtC;AACD;AAVI,GAAP;AAYD,C","file":"logger.js","sourcesContent":["import Logger, { configure as nightingaleConfigure, levels } from 'nightingale/src';\nimport ConsoleHandler from 'nightingale-console/src';\n\nexport { levels };\n\nexport const logger = new Logger('pobuild');\nexport const config = level => (\n  [\n    {\n      pattern: /^pobuild/,\n      handler: new ConsoleHandler(level),\n    },\n  ]\n);\n\nexport const configure = level => nightingaleConfigure(config(level || levels.ERROR));\n\n\nexport default (name) => {\n  const _logger = logger.child(name, name);\n  const startTime = _logger.infoTime('starting');\n\n  return {\n    subtask(name) {\n      const startTimeSubtask = _logger.infoTime(name);\n      return () => {\n        _logger.infoSuccessTimeEnd(startTimeSubtask, `${name}: done.`);\n      };\n    },\n\n    succeed() {\n      _logger.infoSuccessTimeEnd(startTime, 'done.');\n    },\n  };\n};\n"]}