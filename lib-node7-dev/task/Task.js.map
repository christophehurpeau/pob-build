{"version":3,"sources":["../../src/task/Task.js"],"names":["notifiers","addNotifier","notifier","push","replaceNotifiers","newNotifiers","splice","length","Task","constructor","name","_name","_notifiers","map","subtask","callbacks","done","forEach","callback","succeed"],"mappings":";;;;;AAAA,MAAMA,cAAN;;AAEO,MAAMC,oCAAcC,YAAYF,UAAUG,IAAV,CAAeD,QAAf,CAAhC;AACA,MAAME,8CAAmBC,gBAAgB;AAC9CL,YAAUM,MAAV,CAAiB,CAAjB,EAAoBN,UAAUO,MAA9B;AACAP,YAAUG,IAAV,CAAe,GAAGE,YAAlB;AACD,CAHM;;IAKcG,I,GAAN,MAAW;AACxBC,cAAYC,IAAZ,EAAkB;AAChB,SAAKC,KAAL,GAAaD,IAAb;AACA,SAAKE,UAAL,GAAkBZ,UAAUa,GAAV,CAAcX,YAAYA,SAASQ,IAAT,CAA1B,CAAlB;AACD;;AAEDI,UAAQJ,IAAR,EAAc;AACZ,UAAMK,YAAY,KAAKH,UAAL,CAAgBC,GAAhB,CAAoBX,YAAYA,SAASY,OAAT,CAAiBJ,IAAjB,CAAhC,CAAlB;AACA,WAAO;AACLM,YAAM,MAAM;AACVD,kBAAUE,OAAV,CAAkBC,YAAYA,UAA9B;AACD;AAHI,KAAP;AAKD;;AAEDC,YAAU;AACR,SAAKP,UAAL,CAAgBK,OAAhB,CAAwBf,YAAYA,SAASiB,OAAT,EAApC;AACD;AAjBuB,C;kBAALX,I","file":"Task.js","sourcesContent":["const notifiers = [];\n\nexport const addNotifier = notifier => notifiers.push(notifier);\nexport const replaceNotifiers = newNotifiers => {\n  notifiers.splice(0, notifiers.length);\n  notifiers.push(...newNotifiers);\n};\n\nexport default class Task {\n  constructor(name) {\n    this._name = name;\n    this._notifiers = notifiers.map(notifier => notifier(name));\n  }\n\n  subtask(name) {\n    const callbacks = this._notifiers.map(notifier => notifier.subtask(name));\n    return {\n      done: () => {\n        callbacks.forEach(callback => callback());\n      },\n    };\n  }\n\n  succeed() {\n    this._notifiers.forEach(notifier => notifier.succeed());\n  }\n}\n"]}